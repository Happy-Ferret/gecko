<html>
    <head>
        <title>Cloud9</title>
        <style type="text/css" media="screen">
            body {
                background-color: #999;
                padding: 0;
                margin: 0;
            }
            
            #browserContentArea {
                display: -moz-box;
                border: 1px solid green;
                width: 100%;
                height: 100%;
                overflow: auto;
            }
            
            #contentFrame {
                border: 1px solid blue;
                -moz-box-flex: 1;
                width: 100%;
                height: 100%;
            }
            
            #outer {
                margin: 0;
                width: 100%;
                height: 100%;
                display: -moz-box;
                -moz-box-orient: vertical;
            }
        </style>
        <script type="text/javascript" src="async.js"></script>
        <script type="text/javascript">
            var ui = require("ui");
            var menu = require("menu");
            
            function inspect(o) {
                var s = "";
                for (var i in o)
                    s += i + ": " + o[i] + "\n";
                console.log(s);
            }

            function start() {}
            
            function showNotification() {
                ui.showNotification("Sample Notification", "Contents of the notification!", null, true, function() {
                    alert("Notification clicked!");
                }, function() {
                    alert("Notification hidden!");
                });
            }
            
            function attention() {
                ui.getAttention();
            }
            
            function beep() {
                ui.beep();
            }
            
            function playSound() {
                var sound = document.location.href.replace("index.html", "") + "office_lobby.mp3";
                ui.playSound(sound);
            }
            
            function addTray() {
                var icon = document.location.href.replace("index.html", "") + "firefox.ico";
                ui.addTray(icon, "UI Kit");
            }

            // a generic handler
            function loggit(x) {
              console.log("thanks for clicking");
            }

            var menuBar = ui.getMenu();
            while (menuBar.firstChild)
                menuBar.removeChild(menuBar.firstChild);

            var file = menu.Menu({
                parent: menuBar,
                label: "File",
                children: [
                    menu.Menu({
                        label: "New Window",
                        hotkey: "accel-n",
                        type: "radio",
                        checked: true,
                        onClick: function(e) {
                            alert("yay!");
                        }
                    }),
                    menu.Menu({
                        label: "New Tab",
                        children: [
                            menu.Menu({ label: "In the current window",
                                        onClick: loggit}),
                            menu.Menu({ label: "In a new window", onClick: loggit})
                        ]
                    })
                ]
            });

            var view = menu.Menu({
                parent: menuBar,
                label: "View",
                children: [
                    menu.Menu({ label: "Navigation Toolbar" }),
                    menu.Menu({ label: "Bookmarks Toolbar", hotkey: "accel-d", image: "resource://app/icons/favorite.png" }),
                    menu.Menu({ label: "Add-on Bar", disabled: true }),
                    menu.Separator(),
                    menu.Menu({ label: "Tabs On Top" })
                ]
            });

            function updateMenu() {
                view.children.splice(0, 1);
                view.children.splice(-1, 0, menu.Menu({ label: "About..." }));
                view.children.sort(function(a, b) {
                    a = a.label;
                    b = b.label;
                    if (a.label == "-")
                        return 0;
                    if (a.label < b.label)
                       return -1;
                    if (a.label > b.label)
                       return 1;
                    // a must be equal to b
                    return 0;
                });
                view.children[0].onclick = function() {
                    alert("What are you looking at?!");
                };
            }
        </script>
    </head>
    <body onload="start()">
        <div id="outer">
            <div id="browserContentArea">
                <button onclick="showNotification()">Display notification</button>
                <button onclick="attention()">Attention!</button>
                <button onclick="beep()">Sound a BEEP</button>
                <button onclick="playSound()">Play an MP3</button>
                <button onclick="addTray()">Update tray/ dock icon</button>
                <button onclick="updateMenu()">Update the application menu</button>
            </div>
        </div>
    </body>
</html>
